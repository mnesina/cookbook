<a href="README.md">Оглавление</a>

# PHP - problems & solutions. PHP - проблемы и решения 

## PHP+Apache, баг - невидимка. Команда echo и не всегдла уловимые тормоза при выводе. Буфер выходного потока

Эта проблема была [описана][1] еще в 2002 году и, судя по отсутствию отклика, до сих пор подстерегает нас.
Суть ее в том, что в при работе приложения на web-сервере команда `echo` может очень сильно тормозить. Но тормоза эти заметны не всегда, а при выдаче `echo` большого объема информации (что естественно) 
и только, если у Вас плохая связь с сервером (что уже может поставить в тупик). Подчеркну, что речь идет не о тормозах сети, а именно о времени генерации страницы, "затыкающейся" на команде `echo`.

Суть проблемы детально описана в статье на habr ["Функция echo в PHP может выполняться более 1 секунды" (автор gnomeby)][2]
Из предложенных решений как в первом случае, когда у нас выявился этот баг, так и привентивно в дальнейшем было использовано `php_flag output_buffering On` 
Следует отметить, что, насколько я понимаю, наличие `nginx` перед `Apache` также должно вылечивать эту ситуацию т.к. ответ `Apache` поучает теперь не от пользователя, а от `nginx`, находящегося рядом.

Важно понимать, что проблема может не наблюдаться разработчиками, имеющих хорошую связь с сервером, но в полный рост "радовать" удаленных пользователей. Поэтому, если мы имеем дело с `cms` в котрой страница отдается при помощи `echo`, меры нужно принимать заранее =)


[1]: https://bugs.php.net/bug.php?id=18029
[2]: https://habr.com/ru/post/45016/
